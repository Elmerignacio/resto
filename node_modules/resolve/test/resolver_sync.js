var path = require('path');
var fs = require('fs');
var test = require('tape');

var resolve = require('../');
var sync = require('../sync');

var requireResolveSupportsPaths = require.resolve.length > 1
    && !(/^v12\.[012]\./).test(process.version); // broken in v12.0-12.2, see https://github.com/nodejs/node/issues/27794

var requireResolveDefaultPathsBroken = (/^v8\.9\.|^v9\.[01]\.0|^v9\.2\./).test(process.version);
// broken in node v8.9.x, v9.0, v9.1, v9.2.x. see https://github.com/nodejs/node/pull/17113

test('`./sync` entry point', function (t) {
    t.equal(resolve.sync, sync, '`./sync` entry point is the same as `.sync` on `main`');
    t.end();
});

test('foo', function (t) {
    var dir = path.join(__dirname, 'resolver');

    t.equal(
        resolve.sync('./foo', { basedir: dir }),
        path.join(dir, 'foo.js'),
        './foo'
    );
    if (requireResolveSupportsPaths) {
        t.equal(
            resolve.sync('./foo', { basedir: dir }),
            require.resolve('./foo', { paths: [dir] }),
            './foo: resolve.sync === require.resolve'
        );
    }

    t.equal(
        resolve.sync('./foo.js', { basedir: dir }),
        path.join(dir, 'foo.js'),
        './foo.js'
    );
    if (requireResolveSupportsPaths) {
        t.equal(
            resolve.sync('./foo.js', { basedir: dir }),
            require.resolve('./foo.js', { paths: [dir] }),
            './foo.js: resolve.sync === require.resolve'
        );
    }

    t.equal(
        resolve.sync('./foo.js', { basedir: dir, filename: path.join(dir, 'bar.js') }),
        path.join(dir, 'foo.js')
    );

    t.throws(function () {
        resolve.sync('foo', { basedir: dir });
    });

    // Test that filename is reported as the "from" value when passed.
    t.throws(
        function () {
            resolve.sync('foo', { basedir: dir, filename: path.join(dir, 'bar.js') });
        },
        {
            name: 'Error',
            message: "Cannot find module 'foo' from '" + path.join(dir, 'bar.js') + "'"
        }
    );

    t.end();
});

test('bar', function (t) {
    var dir = path.join(__dirname, 'resolver');

    var basedir = path.join(dir, 'bar');

    t.equal(
        resolve.sync('foo', { basedir: basedir }),
        path.join(dir, 'bar/node_modules/foo/index.js'),
        'foo in bar'
    );
    if (!requireResolveDefaultPathsBroken && requireResolveSupportsPaths) {
        t.equal(
            resolve.sync('foo', { basedir: basedir }),
            require.resolve('foo', { paths: [basedir] }),
            'foo in bar: resolve.sync === require.resolve'
        );
    }

    t.end();
});

test('baz', function (t) {
    var dir = path.join(__dirname, 'resolver');

    t.equal(
        resolve.sync('./baz', { basedir: dir }),
        path.join(dir, 'baz/quux.js'),
        './baz'
    );
    if (requireResolveSupportsPaths) {
        t.equal(
            resolve.sync('./baz', { basedir: dir }),
            require.resolve('./baz', { paths: [dir] }),
            './baz: resolve.sync === require.resolve'
        );
    }

    t.end();
});

test('biz', function (t) {
    var dir = path.join(__dirname, 'resolver/biz/node_modules');

    t.equal(
        resolve.sync('./grux', { basedir: dir }),
        path.join(dir, 'grux/index.js')
    );
    if (requireResolveSupportsPaths) {
        t.equal(
            resolve.sync('./grux', { basedir: dir }),
            require.resolve('./grux', { paths: [dir] }),
            './grux: resolve.sync === require.resolve'
        );
    }

    var tivDir = path.join(dir, 'grux');
    t.equal(
        resolve.sync('tiv', { basedir: tivDir }),
        path.join(dir, 'tiv/index.js')
    );
    if (!requireResolveDefaultPathsBroken && requireResolveSupportsPaths) {
        t.equal(
            resolve.sync('tiv', { basedir: tivDir }),
            require.resolve('tiv', { paths: [tivDir] }),
            'tiv: resolve.sync === require.resolve'
        );
    }

    var gruxDir = path.join(dir, 'tiv');
    t.equal(
        resolve.sync('grux', { basedir: gruxDir }),
        path.join(dir, 'grux/index.js')
    );
    if (!requireResolveDefaultPathsBroken && requireResolveSupportsPaths) {
        t.equal(
            resolve.sync('grux', { basedir: gruxDir }),
            require.resolve('grux', { paths: [gruxDir] }),
            'grux: resolve.sync === require.resolve'
        );
    }

    t.end();
});

test('normalize', function (t) {
    var dir = path.join(__dirname, 'resolver/biz/node_modules/grux');

    t.equal(
        resolve.sync('../grux', { basedir: dir }),
        path.join(dir, 'index.js')
    );
    if (requireResolveSupportsPaths) {
        t.equal(
            resolve.sync('../grux', { basedir: dir }),
            require.resolve('../grux', { paths: [dir] }),
            '../grux: resolve.sync === require.resolve'
        );
    }

    t.end();
});

test('cup', function (t) {
    var dir = path.join(__dirname, 'resolver');

    t.equal(
        resolve.sync('./cup', {
            basedir: dir,
            extensions: ['.js', '.coffee']
        }),
        path.join(dir, 'cup.coffee'),
        './cup -> ./cup.coffee'
    );

    t.equal(
        resolve.sync('./cup.coffee', { basedir: dir }),
        path.join(dir, 'cup.coffee'),
        './cup.coffee'
    );

    t.throws(function () {
        resolve.sync('./cup', {
            basedir: dir,
            extensions: ['.js']
        });
    });

    if (requireResolveSupportsPaths) {
        t.equal(
            resolve.sync('./cup.coffee', { basedir: dir, extensions: ['.js', '.coffee'] }),
            require.resolve('./cup.coffee', { paths: [dir] }),
            './cup.coffee: resolve.sync === require.resolve'
        );
    }

    t.end();
});

test('mug', function (t) {
    var dir = path.join(__dirname, 'resolver');

    t.equal(
        resolve.sync('./mug', { basedir: dir }),
        path.join(dir, 'mug.js'),
        './mug -> ./mug.js'
    );
    if (requireResolveSupportsPaths) {
        t.equal(
            resolve.sync('./mug', { basedir: dir }),
            require.resolve('./mug', { paths: [dir] }),
            './mug: resolve.sync === require.resolve'
        );
    }

    t.equal(
        resolve.sync('./mug', {
            basedir: dir,
            extensions: ['.coffee', '.js']
        }),
        path.join(dir, 'mug.coffee'),
        './mug -> ./mug.coffee'
    );

    t.equal(
        resolve.sync('./mug', {
            basedir: dir,
            extensions: ['.js', '.coffee']
        }),
        path.join(dir, 'mug.js'),
        './mug -> ./mug.js'
    );

    t.end();
});

test('other path', function (t) {
    var resolverDir = path.join(__dirname, 'resolver');
    var dir = path.join(resolverDir, 'bar');
    var otherDir = path.join(resolverDir, 'other_path');

    t.equal(
        resolve.sync('root', {
            basedir: dir,
            paths: [otherDir]
        }),
        path.join(resolverDir, 'other_path/root.js')
    );

    t.equal(
        resolve.sync('lib/other-lib', {
            basedir: dir,
            paths: [otherDir]
        }),
        path.join(resolverDir, 'other_path/lib/other-lib.js')
    );

    t.throws(function () {
        resolve.sync('root', { basedir: dir });
    });

    t.throws(function () {
        resolve.sync('zzz', {
            basedir: dir,
            paths: [otherDir]
        });
    });

    t.end();
});

test('path iterator', function (t) {
    var resolverDir = path.join(__dirname, 'resolver');

    var exactIterator = function (x, start, getPackageCandidates, opts) {
        return [path.join(resolverDir, x)];
    };

    t.equal(
        resolve.sync('baz', { packageIterator: exactIterator }),
        path.join(resolverDir, 'baz/quux.js')
    );

    t.end();
});

test('incorrect main', function (t) {
    var resolverDir = path.join(__dirname, 'resolver');
    var dir = path.join(resolverDir, 'incorrect_main');

    t.equal(
        resolve.sync('./incorrect_main', { basedir: resolverDir }),
        path.join(dir, 'index.js')
    );
    if (requireResolveSupportsPaths) {
        t.equal(
            resolve.sync('./incorrect_main', { basedir: resolverDir }),
            require.resolve('./incorrect_main', { paths: [resolverDir] }),
            './incorrect_main: resolve.sync === require.resolve'
        );
    }

    t.end();
});

test('missing index', function (t) {
    t.plan(requireResolveSupportsPaths ? 2 : 1);

    var resolverDir = path.join(__dirname, 'resolver');
    try {
        resolve.sync('./missing_index', { basedir: resolverDir });
        t.fail('did not fail');
    } catch (err) {
        t.equal(err && err.code, 'MODULE_NOT_FOUND', 'error has correct error code');
    }
    if (requireResolveSupportsPaths) {
        try {
            require.resolve('./missing_index', { basedir: resolverDir });
            t.fail('require.resolve did not fail');
        } catch (err) {
            t.equal(err && err.code, 'MODULE_NOT_FOUND', 'error has correct error code');
        }
    }
});

test('missing main', function (t) {
    var resolverDir = path.join(__dirname, 'resolver');

    try {
        resolve.sync('./missing_main', { basedir: resolverDir });
        t.fail('require.resolve did not fail');
    } catch (err) {
        t.equal(err && err.code, 'MODULE_NOT_FOUND', 'error has correct error code');
    }
    if (requireResolveSupportsPaths) {
        try {
            resolve.sync('./missing_main', { basedir: resolverDir });
            t.fail('require.resolve did not fail');
        } catch (err) {
            t.equal(err && err.code, 'MODULE_NOT_FOUND', 'error has correct error code');
        }
    }

    t.end();
});

test('null main', function (t) {
    var resolverDir = path.join(__dirname, 'resolver');

    try {
        resolve.sync('./null_main', { basedir: resolverDir });
        t.fail('require.resolve did not fail');
    } catch (err) {
        t.equal(err && err.code, 'MODULE_NOT_FOUND', 'error has correct error code');
    }
    if (requireResolveSupportsPaths) {
        try {
            resolve.sync('./null_main', { basedir: resolverDir });
            t.fail('require.resolve did not fail');
        } catch (err) {
            t.equal(err && err.code, 'MODULE_NOT_FOUND', 'error has correct error code');
        }
    }

    t.end();
});

test('main: false', function (t) {
    var basedir = path.join(__dirname, 'resolver');
    var dir = path.join(basedir, 'false_main');
    t.equal(
        resolve.sync('./false_main', { basedir: basedir }),
        path.join(dir, 'index.js'),
        '`"main": false`: resolves to `index.js`'
    );
    if (requireResolveSupportsPaths) {
        t.equal(
            resolve.sync('./false_main', { basedir: basedir }),
            require.resolve('./false_main', { paths: [basedir] }),
            '`"main": false`: resolve.sync === require.resolve'
        );
    }

    t.end();
});

var stubStatSync = function stubStatSync(fn) {
    var statSync = fs.statSync;
    try {
        fs.statSync = function () {
            throw new EvalError('Unknown Error');
        };
        return fn();
    } finally {
        fs.statSync = statSync;
    }
};

test('#79 - re-throw non ENOENT errors from stat', function (t) {
    var dir = path.join(__dirname, 'resolver');

    stubStatSync(function () {
        t.throws(function () {
            resolve.sync('foo', { basedir: dir });
        }, /Unknown Error/);
    });

    t.end();
});

test('#52 - incorrectly resolves module-paths like "./someFolder/" when there is a file of the same name', function (t) {
    var dir = path.join(__dirname, 'resolver');
    var basedir = path.join(dir, 'same_names');

    t.equal(
        resolve.sync('./foo', { basedir: basedir }),
        path.join(dir, 'same_names/foo.js')
    );
    if (requireResolveSupportsPaths) {
        t.equal(
            resolve.sync('./foo', { basedir: basedir }),
            require.resolve('./foo', { paths: [basedir] }),
            './foo: resolve.sync === require.resolve'
        );
    }

    t.equal(
        resolve.sync('./foo/', { basedir: basedir }),
        path.join(dir, 'same_names/foo/index.js')
    );
    if (requireResolveSupportsPaths) {
        t.equal(
            resolve.sync('./foo/', { basedir: basedir }),
            requ\$`H‹t$pHƒÄP_ÃÌÌÌÌÌÌÌÌÌÌH‹ÄH‰XH‰hH‰pH‰x AVHƒìPI‹ø‹òH‹éHÿ¸ D  L‹´$ˆ   …Àu0ÇD$8œ€E3ÉÇD$0   L‹ÇL‰t$(‹ÖHƒd$  H‹Íè€şÿÿ¸œ  ·ØL‹ÇË  €‹Ö…ÀH‹ÍNØƒd$H Hƒd$@ E3É‰\$8ÇD$0   L‰t$(Hƒd$  èÿüÿÿH‹l$h‹ÃH‹\$`H‹t$pH‹|$xHƒÄPA^ÃÌÌÌÌÌÌÌÌÌÌHƒìHH‹D$HD‰L$8E3ÉÇD$0   H‰D$(Hƒd$  èëıÿÿHƒÄHÃÌÌÌÌÌÌÌÌÌÌHƒìHH‹D$HH‰D$(èåşÿÿHƒÄHÃÌÌÌÌÌÌÌÌHƒìHH‹D$HH‰D$(èùıÿÿHƒÄHÃÌÌÌÌÌÌÌÌHƒìHH‹D$HL¸ ÇD$8ÿÿ €E3ÉÇD$0   ºL  H‰D$(Hƒd$  èdıÿÿHƒÄHÃÌÌÌÌÌÌÌ¹   Í)ÃÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌHƒì(HÿM D  …ÀtHƒÄ(ÃÌH‹L$(º&	  èWÿÿÿÌÌÌÌÌÌÌHƒì(Hÿ= D  …ÀtHƒÄ(ÃÌH‹L$(º0	  è'ÿÿÿÌÌÌÌÌÌÌHƒì(H‹	H…Étè¿ÿÿÿHƒÄ(ÃÌÌÌÌÌÌÌÌÌH‰\$H‰l$VWATAVAWHìP  H‹ d H3ÄH‰„$@  H¸       ÀI‹ÙL‹ÂH‹ùL…È…¼  HD$0º  L+ÀHL$0E3äAt$H‚úşÿH…ÀtA·f…Àtf‰HƒÁH+ÖuŞHAşH…ÒL HEÁHL$0fD‰ èäÿÿL‹óÇD$(  D‹ÆIÁîãÿÿÿD‰d$ LL$0‹ÓDGÃ3ÉHÿŒ D  L‹øH…Àt4H‹/H…ít$HÿÈ	 D  H‹Í‹Øèşÿÿ‹ËHÿÀ	 D  L‰?A‹Üëè2ìÿÿ‹Ø…Ûy#º…   H‹Œ$x  Lˆ D‹Ëèlıÿÿ‹Ãé“   LŞ HL$0è\ãÿÿE…öÇD$(  LL$0D‰d$ AEöA‹ÖD‹Æ3ÉHÿä
 D  H‹èH…Àt6H‹wH…öt$Hÿ	 D  H‹Î‹ØèØıÿÿ‹ËHÿ	 D  H‰oA‹Üëèˆëÿÿ‹Ø…Ûy
º‰   éQÿÿÿ3ÀH‹Œ$@  H3ÌèºÀ  Lœ$P  I‹[8I‹k@I‹ãA_A^A\_^ÃÌè\ıÿÿÌÌÌÌÌÌÌÌH‰t$WHƒì H‹òH‹ù3ÒHÿ×	 D  ƒøÿuº•   H‹L$(Lx è—üÿÿé6  …Àt=  t
º–   é  ƒd$@ º   H‹Ï…Àu[LD$@HÿØ	 D  …Àuº   ë¨ÿD$@E3ÀH‹ÏAPHÿ³	 D  …ÀuHÿ D  =*  „”   º£   é™   ƒd$H LD$HHÿx	 D  …Àu
º­   éEÿÿÿƒ|$H tº®   ëgE3ÀH‹ÏAPHÿF	 D  …ÀuHHÿ– D  =*  u53ÒH‹ÏHÿÆ D  ƒøÿu
º´   éêşÿÿ…Àtºµ   ë‹D$@‰3Àë!º±   H‹L$(LH A¹ÿÿ €è)ûÿÿ¸ÿÿ €H‹t$0HƒÄ _ÃÌÌÌÌÌÌÌÌÌH‹ÄH‰XH‰pH‰x UAVAWH¨˜şÿÿHìP  H‹` H3ÄH‰…@  E3ÿHD$0M‰8HT$0H+ÈM‹ğA¹  IúşÿH…Àt·f…Àtf‰HƒÂIƒéuŞM…ÉHBşL	 HEÂHL$0fD‰8è‡àÿÿ»  LD$0‹Ë3ÒHÿ* D  H‹øH…Àu4Hÿf D  ƒø„è   ºÉ   H‹h  LI èhúÿÿ‹ğéÌ   HT$$D‰|$$H‹ÏD‰|$ èzıÿÿ‹ğ…Ày H‹h  L D‹ÈºÏ   èñùÿÿé   Le HL$0èãßÿÿLD$03Ò‹ËHÿ‹ D  H‹ØH…Àu
ºÕ   éqÿÿÿHT$ H‹Ëèıÿÿ‹ğ…Ày%H‹h  L§ D‹Èº×   è†ùÿÿH‹ËèVúÿÿëH‹ËèLúÿÿHcL$ HcD$$HÁáHÁI‰A‹÷H…ÿtH‹Ïè(úÿÿ‹ÆH‹@  H3Ìè7½  Lœ$P  I‹[ I‹s(I‹{8I‹ãA_A^]ÃÌÌÌÌÌÌÌÌÌÌH‰\$H‰l$H‰t$WATAUAVAWHƒì D‰ALy‹BLq ‰ALa8E3ÉH‹ùM‰HƒÎÿ·B8L‹êf‰AŠˆAM‰H‹‚€   H‰A(H‹‚ˆ   H‰A0M‰$H‹J0H…ÉuAëH‹ÆHÿÀD8u÷HÿÀH‹RxH…ÒuJëH‹ÎHÿÁD8
u÷HÿÁM‹EM…ÀuAPëH‹ÖHÿÂfE9PuöHU   H,
HèL9O@t
H9oHƒ‹   Hÿ€ D  L‹Åº   H‹ÈHÿY D  H‹•d E3ÉL‹àH…ÛtHÿK D  H‹ÈI‹ÔH‹Ãÿ· E3ÉM…ät/H‹_@Hÿ$ D  L‹Ã3ÒH‹ÈHÿ D  E3ÉL‰g@H‰oHLg8H‹_@H…Û„¾   H‹WHM‹E0H,H;İt9M…Àt4E8t/H‹şHÿÇE88u÷HÿÇH;×rL‹ÏH‹ËèÑÜÿÿE3ÉM…ÿtI‰HßëM…ÿtM‰M‹ExH;İt9M…Àt4E8t/HÿÆE80u÷H‹ÕHÿÆH+ÓH;ÖrL‹ÎH‹Ëè„ÜÿÿM…ötI‰HŞëM…ötM‰M‹EM‹ÌH‹ÕH‹Ëè  H+è3ÒL‹ÅH‹Èè-È  H‹\$PH‹l$XH‹t$`HƒÄ A_A^A]A\_ÃÌÌÌÌÌÌÌÌH‹ÄH‰XH‰hH‰pH‰x AVHƒì H‹YE3ö·A H‹ùH,€HÁåHëH;İt?Hs@H‹HÿÇ D  L‹Ã3ÒH‹ÈHÿ« D  L‰6L‰vHvPHFÀH;ÅuÉH‹_Hÿ D  L‹Ã3ÒH‹ÈHÿs D  H‹\$0H‹l$8H‹t$@D‰w L‰wH‹|$HHƒÄ A^ÃÌÌÌÌÌÌÌH‰\$H‰l$H‰t$WATAUAVAWHƒì H‹YL‹ú‹iH‹ñA½P   H…Û…†   …ít}Hÿ	 D  SA¸  H‹ÈHÿá D  L‹5b H‹øH‹ØM…ötHÿÓ D  H‹ÈH‹ÓI‹Æÿ? H‰~H…ÿt#H‡  ÇF    H;øtfD‰/IıH;øuôH‹^H…Ûtt…ít6·F H€HÁáHËH;Ùt"D‹FHSD9BüvA‹G9tFIÕHBøH;Áuæ·F"3Ò·N ÿÀ÷ñA¸   ·Âf‰V"H€H‹FHÁáHËğDÁ AÿÀI‹×è²ûÿÿH‹\$PH‹l$XH‹t$`HƒÄ A_A^A]A\_ÃÌÌÌÌÌÌÌÌÌH‰\$WHƒì H‹=Ë` 3ÛH…ÿ„”   H9_u%H‹HT$8H!\$8èd  …ÀxH9_u	H‹D$8H‰GH‹GHH H÷ØHÿH#ùtVHÿ D  D‹ÀD‹ÈH¸ÍÌÌÌÌÌÌÌI÷áHÁêH’HÉL+ÁJ‹\Çë	D9t,H‹[H…ÛuòH…ÛtHƒ{ uHOH‰KH‹ÃH‹\$0HƒÄ _ÃÌHƒÃë×ÌÌÌÌÌÌÌH‰\$H‰l$H‰t$WHƒì 2ÀAÆ  I‹éI‹øH‹òH‹ÙH…Ò„°   H‹RèÈÿÿÿH‹V H…Ò„š   ƒ: u¸   ğÁ=Y ÿÀ‰ƒ{H uCHòJòKXHƒÉÿL/H‹ÁC`òJòKpHÿÀ€< u÷HøI‹ÂH+ÇHƒø~7Æ\HÿÇL‹BHÿÁA€< uöHÿÁL+×I;ÊI‹ÚI‹ÒHBÙH‹ÏL‹ËèlØÿÿÆD;ÿ °H‹\$0H‹l$8H‹t$@HƒÄ _ÃÌÌÌÌÌÌÌÌÌÌÌÌH‹ÄH‰XH‰hH‰pH‰x AVHƒì Æ @2íH‹_ M‹ğH‹òH‹ùH…ÛtEHÿeÿ  D  D‹ÈD‹ĞH¸ÍÌÌÌÌÌÌÌI÷âHÁêH’HÉL+ÉJ‹ËëD9„Ş   H‹[H…Ûuî3ÛH…ÛtDHƒ; t>@ˆ.M‹ÎH‹L‹ÆH‹Ïèfşÿÿ„ÀtH‰w@H‹H‹KH‹×H‹H‹ ÿğ H‹[@
èH…ÛuáH‹}^ H…ÀtH‹×@ŠÍÿÌ Hÿ½ş  D  ‹ö^ ;Èt@¹   ğÁé^ ÿÁƒù}%‰Ø^ è#ıÿÿH…ÀtH‹×H‹Èè»ûÿÿÇ¹^     ğÿ¶^ H‹\$0H‹l$8H‹t$@H‹|$HHƒÄ A^ÃÌHƒÃé$ÿÿÿÌÌÌÌÌÌÌÌÌ@SHƒì H‹c^ 3ÛH…ÀuHH‹õ^ H…ÀuHé HÿÊı  D  H‰Ö^ Hç H‹ÈHÿı  D  H‰^ H…Àtÿæ  ŠØŠÃHƒÄ [ÃÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌH‰\$H‰t$WHƒì H‹:^ 3ÛH‹úH‹ñH…ÀuHH‹f^ H…ÀuHZ Hÿ;ı  D  H‰G^ Hx H‹ÈHÿı  D  H‰ê] H…ÀtH‹×H‹ÎÿQ  ‹ØH‹t$8‹ÃH‹\$0HƒÄ _ÃÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌHƒì8M‹ H‹Êƒd$  ƒÊÿD‹ÊHÿ\ı  D  ƒèHƒÄ8ÃÌÌÌÌÌÌÌH‰\$H‰t$WHƒì0Hƒ" H‹òHƒd$H 3Ò3ÿ»W €Hÿlş  D  H!|$(H“ÿÿÿH‰L$ DOH‹ÈDGHŒS Hÿş  D  H…ÀtH‹x3Û…ÛxBH‹G(H‹L$HH‹XH…ÉtH‹H‹Bÿjÿ  HT$HH‹ÏH‹ÃÿYÿ  ‹Ø…ÀxH‹L$H3ÒH‰ëH‹T$HH…ÒtHƒd$H H‹ÊH‹H‹@ÿ'ÿ  H‹t$P‹ÃH‹\$@HƒÄ0_ÃÌÌÌÌÌÌÌÌÌÌÌÌÌHƒì(H‹ÁH‹	H…ÉtHƒ  H‹H‹@ÿèş  HƒÄ(ÃÌÌÌÌÌÌÌH‰\$H‰t$ UWATAVAWH¬$€şÿÿHì€  H‹|T H3ÄH‰…p  L‹úH‹ÙHƒ" Hÿ™û  D  D‹ÈH‰\$(ÇD$ x   L… º  HL$`èFÕÿÿA¹  E3ÀHT$`3ÉHÿ&ü  D  H‹ØH‰D$HH…Àuèİÿÿ‹øéè   E3ÀƒÊÿH‹ËHÿ û  D  =  t…Àt=€   …€  ©ÿÿÿtE3öëL‹óL‰t$P3öE3äH!t$@LD$@HL$`è óÿÿ‹ø…ÀyH‹¨  D‹ÈL VbèñíÿÿëL‹d$@3ÿ…ÿy H‹¨  D‹ÏL%ç M‹Äºk   èÆíÿÿëI‹ôHÁæ3ÿL%È …ÿy
º&  éÌ  H…öt\I‰7‹ÿÁI‹‰H‹\$H3ÿM…öt	I‹Îè‰îÿÿH…ÛtH‹ËèKîÿÿ‹ÇH‹p  H3ÌèZ±  Lœ$€  I‹[@I‹sHI‹ãA_A^A\_]ÃÌIƒ' HÿŠù  D  H‹Èº   DBpHÿbù  D  H‹ğH‹=›Y H…ÿtHÿWù  D  H‹ÈH‹ÖH‹ÇÿÃü  H‰t$XH…öu!H‹¨  ¿ €D‹ÏM‹ÄºB  èÍìÿÿéé   WÀóD$0@öÆ…ò   L‹ÎIÁéHT$`HL$0è÷íÿÿ‹ø…ÀyWH‹¨  D‹ÈM‹ÄºE  è‚ìÿÿH‹L$8H…ÉtèKíÿÿH‹L$0H…Étè<íÿÿHÿ­ø  D  H‹ÈL‹Æ3ÒHÿ‘ø  D  ë[¿   ‰>H‰^3ÛH‰\$HH‹D$0H‰FH!\$0H‹D$8H‰FH!\$8HN"3ÒDGUèQ½  GWf‰F ‰~$HN(3ÒDGOè8½  I‰73ÿ…ÿ‰Oşÿÿº.  M‹ÄD‹ÏH‹¨  èÈëÿÿé5şÿÿèzìÿÿH‹¨  è)ìÿÿÌÌÌÌÌÌÌÌÌ@SUVWAVHƒì@€=fX  H‹ù…å  H‹X H…Àt	ÿKû  ¶À…À…È  H‹wE3ÀH‹ÎƒÊÿHÿ¤ø  D  =  t…Àt=€   …«  ©ÿÿÿt3ö‹ƒèH‰t$x‰…j  H‹oL5óëÿÿH…ít4H‰¬$€   Hÿ÷  D  H‹ÍL‰´$ˆ   ‹ØèÈëÿÿ‹ËHÿ÷  D  Hƒg H‹oH…ít.H‰l$ HÿØö  D  H‹ÍL‰t$(‹ØèŒëÿÿ‹ËHÿËö  D  Hƒg H…öt5H‰t$0Hÿ ö  D  ‹ØH‹ÎH‡ëÿÿH‰D$8è}ëÿÿ‹ËHÿŒö  D  Hw(3ÛLvPH‰\$xI;ötKH‹.ë0H‹İH‹mHKè‚óÿÿHÿ‡ö  D  L‹Ã3ÒH‹ÈHÿkö  D  H…íuËH‰.HƒÆI;öuºH‹\$xH‹OH…ÉtèÒêÿÿH‹OH…ÉtèÄêÿÿH‹OH…Étè¶êÿÿHÿ'ö  D  L‹Ç3ÒH‹ÈHÿö  D  ëH‹\$xH…ÛtH‹Ëè²êÿÿë‹ÿÈ‰HƒÄ@A^_^][ÃÌH‹L$hèêÿÿÌÌÌÌÌÌÌÌHƒì(H‹	H…ÉtèKêÿÿHƒÄ(ÃÌÌÌÌÌÌÌÌÌH‰\$H‰l$H‰t$WHƒì 3íI‹ÙH‹ùH;Êt?M…Àt:fA9(t4HƒÈÿHÿÀfA9,@uöH4E   H+×H;ÖrL‹Îè~ÎÿÿH…ÛtH‰;H>ëH…ÛtI‰)H‹ÇH‹\$0H‹l$8H‹t$@HƒÄ _ÃÌÌÌÌÌÌÌÌÌÌÌÌH‰\$H‰l$H‰t$WHƒì H‹êH‹ùHGV ¹Ğ   ¾ €èØº  H‹ØH…À„    3ÒA¸Ğ   H‹ÈèØ¹  H‹Ëèğ¡  H•N H‰CXHæ  H‰HØå  H‰CHå  H‰CHBå  H‰CHïä  H‰C Hœä  H‰C(H…ÿtH‹G(H‰CXH‰{`H0 H‹L‹ÅH‹ËH‹ ÿŞ÷  H‹‹ğH‹AH‹ËÿÌ÷  H‹\$0‹ÆH‹t$@H‹l$8HƒÄ _ÃÌÌÌÌÌÌÌÌÌÌÌÌÌH‰\$H‰t$WHƒì H‹òH‹Ù¿ €HL$@èô  H‹L$@H…Ét8H…ÛtH‹C(H‰AXH‹L$@H‰Y`H‹L$@H‹L‹ÆH‘ H‹ ÿH÷  ‹øH‹L$@H…ÉtHƒd$@ H‹H‹Bÿ)÷  ‹ÇH‹\$0H‹t$8HƒÄ _ÃÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌH‰\$H‰t$WHƒì H‹òH‹Ù¿ €HL$@èP  H‹L$@H…Ét8H…ÛtH‹C(H‰AXH‹L$@H‰Y`H‹L$@H‹L‹ÆHñ H‹ ÿ¨ö  ‹øH‹L$@H…ÉtHƒd$@ H‹H‹Bÿ‰ö  ‹ÇH‹\$0H‹t$8HƒÄ _ÃÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌHÁ0ÿÿÿHJ éi‘  ÌÌÌÌÌÌÌÌÌÌÌÌÌH‰\$H‰t$WHƒì H‹òH‹Ù¿ €HL$@èœ  H‹L$@H…Ét8H…ÛtH‹C(H‰AXH‹L$@H‰Y`H‹L$@H‹L‹ÆH1 H‹ ÿèõ  ‹øH‹L$@H…ÉtHƒd$@ H‹H‹BÿÉõ  ‹ÇH‹\$0H‹t$8HƒÄ _ÃÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌH‰\$H‰t$WHƒì H‹òH‹Ù¿ €HL$@è   H‹L$@H…Ét8H…ÛtH‹C(H‰AXH‹L$@H‰Y`H‹L$@H‹L‹ÆH‘ H‹ ÿHõ  ‹øH‹L$@H…ÉtHƒd$@ H‹H‹Bÿ)õ  ‹ÇH‹\$0H‹t$8HƒÄ _ÃÌÌÌÌÌÌÌ@SHƒì H‹ÙH‹‰˜   H…ÉtHÿìğ  D  Hƒ£˜    H‹‹ˆ   Hƒ£ˆ    HAÿHƒøıwHÿ'ñ  D  HK`Hÿò  D  HK0Hÿoò  D  H‹KHƒc HAÿHƒøıwHÿèğ  D  HƒÄ [ÃÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌ@SHƒì Hƒÿ  èÊŸ  ‹Ø…ÀyH‹L$(LL D‹Èº   ègäÿÿ‹Ãë3ÀHƒÄ [ÃÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌ@SHƒì Hƒ" ¹   H‹ÚHÿ×ó  D  …ÀH™ Hâ HOÊH‹Óèv  ‹Ø…ÀyH‹L$(LÔ D‹Èº#   èïãÿÿ‹Ãë3ÀHƒÄ [ÃÌÌÌÌÌÌÌÌÌÌÌ@USVWATAVAWH‹ìHƒì L‹òE3äL‰"A‹ÜH‰]XA‹üH<Q ¹°   èÒµ  H‹ğH…À„  H_×  H‰H%İ  H‰FH
×  H‰FL~(I‹Ïèîv  HÇFP   H›Ø  H‰HYØ  H‰FHØ  H‰FHã×  H‰F H×  I‰H‹ŞP H…ÉtH‹H‹@ÿäò  HÕŞ  H‰HÜ  H‰FH Ú  H‰FHÙ  H‰F HºØ  I‰L‰fXD‰f`L‰fhÇEH   D‰fxH€   HÿJğ  D  D‰¦ˆ   L‰¦   H˜   Hÿ)ğ  D  H    Hÿğ  D  L‰¦¨   ë¿ €I‹ô…ÿx
H‹ŞH‰]XI‹ôH…ötH‹H‹ÎH‹@ÿò  …ÿyH‹M8D‹ÏL  º+   è1âÿÿéç   L‰ePHUPHå è$t  ‹ø…Ày
º/   é   A±L‹EP3ÒH‹Ëèq  ‹ø…Àyº0   ërH‹MPH…ÉtL‰ePH‹H‹@ÿ ñ  HUPH= èÌs  ‹ø…Àyº2   ë;A±L‹EP3ÒH‹ËèÆp  ‹ø…Àyº3   ëM‹ÆHs H‹Ëè«\  ‹ø…Àyº5   H‹M8D‹ÈLBÿ  èeáÿÿëA‹üH‹MPH…ÉtL‰ePH‹H‹@ÿñ  H…ÛtH‹Ëèà]  ‹ÇHƒÄ A_A^A\_^[]ÃÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌ@USWH‹ìHƒì0H‹ÊH‹HU8H‹€˜   ÿÆğ  ‹Ø…ÀyH‹MD‹ÈLuNH‹H‹ËH‹€ø   ÿ£p  ‹ø…À‰  H‹L$HD‹ÈLR„  ºï  è°`ÿÿ€»˜    tÆƒš   ‹Çé(  ƒ»¸    „‘   H³È   H‹ÎHÿâm  D  H9»À   t0H‹H‹ÏH‹@ÿ,p  H‹‹À   H‰»À   H…ÉtH‹H‹@ÿp  H…ötH‹ÎHÿm  D  H‹H‹ÓH‹ËH‹€À   ÿâo  €»˜    tÆƒš   3ÀéŠ   H‹×H‹ËèÇ  ‹ø…Ày.H‹L$HD‹ÈLrƒ  º  èĞ_ÿÿ€»˜    tÆƒš   ‹ÇëK€»˜    tÆƒš   3Àë7H‹L$H¿W €D‹ÏL+ƒ  º  è‰_ÿÿ€»˜    tÆƒš   ‹Çë‹D$PH‹\$XH‹t$`HƒÄ@_ÃÌÌÌÌÌÌÌÌHƒì(Iƒ  H‹L$(A¹@ €LÖ‚  º   è4_ÿÿ¸@ €ë‹D$@HƒÄ(ÃÌÌÌÌÌÌÌÌÌÌÌÌHƒì(H